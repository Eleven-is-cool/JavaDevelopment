# 权限命令

权限一般分为读(readable)、写(writable)和执行(excutable)，分为三组；

分别对应文件的属主(owner)，属组(group)和其他用户(other)。

通过 **`ls -l`** 命令我们可以 查看某个目录下的文件或目录的权限。

# 文件的类型

- d：代表目录
- -： 代表文件
- l： 代表软链接（可以认为是 window 中的快捷方式）

# 权限类型

**Linux 中权限分为以下几种：**

- r：代表权限是可读，r 也可以用数字 4 表示
- w：代表权限是可写，w 也可以用数字 2 表示
- x：代表权限是可执行，x 也可以用数字 1 表示

**文件和目录权限的区别：**

对文件和目录而言，读写执行表示不同的意义。

对于文件：

| 权限名称 | 可执行操作                  |
| -------- | --------------------------- |
| r        | 可以使用 cat 查看文件的内容 |
| w        | 可以修改文件的内容          |
| x        | 可以将其运行为二进制文件    |

对于目录：

| 权限名称 | 可执行操作               |
| -------- | ------------------------ |
| r        | 可以查看目录下列表       |
| w        | 可以创建和删除目录下文件 |
| x        | 可以使用 cd 进入目录     |

# ugo

**在 linux 中的每个用户必须属于一个组，不能独立于组外。在 linux 中每个文件有所有者、所在组、其它组的概念。**

- **所有者(u)** ：一般为文件的创建者，谁创建了该文件，就天然的成为该文件的所有者，用 `ls ‐ahl` 命令可以看到文件的所有者 也可以使用 chown 用户名 文件名来修改文件的所有者 。
- **文件所在组(g)** ：当某个用户创建了一个文件后，这个文件的所在组就是该用户所在的组用 `ls ‐ahl`命令可以看到文件的所有组也可以使用 chgrp 组名 文件名来修改文件所在的组。
- **其它组(o)** ：除开文件的所有者和所在组的用户外，系统的其它用户都是文件的其它组。

# inode

在 Linux 中，元数据中的 inode 号（inode 是文件元数据的一部分但其并不包含文件名，inode 号即索引节点号）才是文件的唯一标识而非文件名。文件名仅是为了方便人们的记忆和使用，系统或程序通过 inode 号寻找正确的文件数据块。

![image](https://github.com/Eleven-is-cool/img-folder/blob/master/inode.jpg?raw=true)

# 硬链接与软链接

为解决文件的共享使用，Linux 系统引入了两种链接：硬链接 (hard link) 与软链接（又称符号链接，即 soft link 或 symbolic link）。链接为 Linux 系统解决了文件的共享使用，还带来了隐藏文件路径、增加权限安全及节省存储等好处。

若**一个 inode 号对应多个文件名**，则称这些文件为**硬链接**。硬链接可由命令 link 或 ln 创建。如下是对文件 oldfile 创建硬链接。

```shell
link oldfile newfile 
ln oldfile newfile
```

由于硬链接是有着相同 inode 号仅文件名不同的文件，因此硬链接存在以下几点特性：

- 文件有相同的 inode 及 data block；
- 只能对已存在的文件进行创建；
- 不能交叉文件系统进行硬链接的创建；
- 不能对目录进行创建，只可对文件创建；
- 删除一个硬链接文件并不影响其他有相同 inode 号的文件。

若**文件用户数据块中存放的内容是另一文件的路径名的指向**，则该文件就是**软连接**。**类似于 Windows 系统中给文件创建快捷方式，即产生一个特殊文件，该文件用来指向另一个文件，此链接方式同样适用于目录。**软链接就是一个普通文件，只是数据块内容有点特殊。软链接有着自己的 inode 号以及用户数据块。因此软链接的创建与使用没有类似硬链接的诸多限制：

- 软链接有自己的文件属性及权限等；
- 可对不存在的文件或目录创建软链接；
- 软链接可交叉文件系统；
- 软链接可对文件或目录创建；
- 创建软链接时，链接计数 i_nlink 不会增加；
- 删除软链接并不影响被指向的文件，但若被指向的原文件被删除，则相关软连接被称为死链接（即 dangling link，若被指向路径文件被重新创建，死链接可恢复为正常的软链接）。

# Linux命令

```shell
cat /proc/cpuinfo
# 查看CPU型号
cat /proc/cpuinfo | grep name | cut -f2 -d: | uniq -c
# 查看物理cpu个数
cat /proc/cpuinfo | grep "physical id" | sort | uniq|wc -l
# 查看逻辑cpu的个数
cat /proc/cpuinfo | grep "processor" |wc -l
# 查看cpu的核数
cat /proc/cpuinfo | grep "cores"|uniq

# 统计一个文件中每个id的出现次数
grep -o objStr filename|wc -l
grep -c key_word  file1 file2 file3

# 查看进程占用端口
ps -ef | grep 进程名字
# 查看端口号所使用的进程号
lsof -i:端口号

# 显示所有运行中的进程
ps -A
# 查看非root运行的进程
ps -U root -u root -N
# 查看用户Lisa运行的进程
ps -u Lisa

# 修改/test 下的 aaa.txt 的权限为文件所有者有全部权限，文件所有者所在的组有读写权限，其他用户只有读的权限
chmod u=rwx,g=rw,o=r aaa.txt
chmod 764 aaa.txt

```







